---
import { footerMenu, legalMenu } from '@data/menu';
import Logo from '@components/Logo.astro';
import Button from '@components/ui/Button.astro';
import { siteConfig } from '@data/config';

interface ButtonProps {
  text: string;
  link: string;
  target?: string;
}

interface Props {
  footerCta?: {
    title: string;
    description: string;
    hideCta: boolean;
    button: ButtonProps;
  };
}

const { footerCta } = Astro.props;

const defaultCta = {
  title: "Own a local business?",
  description: "Join our business waitlist to be among the first to list your business and reach more local customers when we launch!",
  hideCta: false,
  button: {
    text: "Join Business Waitlist",
    link: "/join-as-business",
    target: "_self"
  }
};

const cta = footerCta || defaultCta;
const currentYear = new Date().getFullYear();
---

<footer class={`bg-black text-white pb-small ${cta.hideCta ? 'pt-large' : ''}`}>
  <div class="site-container mx-auto px-4">
    {!cta.hideCta && (
      <div class="text-center border-b border-background-light mb-12 py-small">
        <h2 class="text-3xl font-bold mb-4" data-aos="fade-up">{cta.title}</h2>
        <p class="text-white mb-6 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">
          {cta.description}
        </p>
        <Button 
          href={cta.button.link}
          target='_blank' 
          variant="ghostLight"
          size="lg"
          data-aos="fade-up"
          data-aos-delay="200"
          {...(cta.button.target && { target: cta.button.target })}
        >
          {cta.button.text}
        </Button>
      </div>
    )}

    <div class="grid grid-cols-1 md:grid-cols-4 gap-8 pb-8 border-b border-background-light">
      <div class="col-span-1">
        <Logo variant="footer" />
        <p class="mt-4 text-white text-sm">
          The local link to all of your town's services in one app.
        </p>
      </div>
      
      <div class="col-span-1">
        <h3 class="text-lg font-semibold mb-2">Quick Links</h3>
        <nav>
          <ul class="space-y-1">
            {footerMenu.map(item => (
              <li><a href={item.link} class="text-sm text-body-dark hover:text-white transition-colors">{item.name}</a></li>
            ))}
          </ul>
        </nav>
      </div>

      <div class="col-span-2 flex flex-col items-start md:items-end">
        <h3 class="text-lg font-semibold mb-2">Connect with us</h3>
        <div class="flex gap-4 mb-4">
          <a href={siteConfig.Socials.xSocial} target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white hover:text-primary transition-colors"><path d="M17.5 6.5L6.5 17.5"/><path d="M6.5 6.5l11 11"/></svg>
          </a>
          <a href={siteConfig.Socials.Instagram} target="_blank" rel="noopener noreferrer" aria-label="Instagram">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white hover:text-primary transition-colors"><rect x="2" y="2" width="20" height="20" rx="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" y1="6.5" x2="17.5" y2="6.5"/></svg>
          </a>
          <a href={siteConfig.Socials.LinkedIn} target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white hover:text-primary transition-colors"><rect x="2" y="2" width="20" height="20" rx="2"/><line x1="16" y1="8" x2="16" y2="16"/><line x1="8" y1="8" x2="8" y2="16"/><line x1="12" y1="12" x2="12" y2="16"/></svg>
          </a>
          <a href={siteConfig.Socials.Github} target="_blank" rel="noopener noreferrer" aria-label="Github">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white hover:text-primary transition-colors"><path d="M12 2C6.48 2 2 6.48 2 12c0 4.42 2.87 8.17 6.84 9.49.5.09.66-.22.66-.48 0-.24-.01-.87-.01-1.7-2.78.6-3.37-1.34-3.37-1.34-.45-1.15-1.1-1.46-1.1-1.46-.9-.62.07-.61.07-.61 1 .07 1.53 1.03 1.53 1.03.89 1.52 2.34 1.08 2.91.83.09-.65.35-1.08.63-1.33-2.22-.25-4.56-1.11-4.56-4.95 0-1.09.39-1.98 1.03-2.68-.1-.25-.45-1.27.1-2.65 0 0 .84-.27 2.75 1.02A9.56 9.56 0 0 1 12 6.8c.85.004 1.71.115 2.51.337 1.91-1.29 2.75-1.02 2.75-1.02.55 1.38.2 2.4.1 2.65.64.7 1.03 1.59 1.03 2.68 0 3.85-2.34 4.7-4.57 4.95.36.31.68.92.68 1.85 0 1.33-.01 2.4-.01 2.73 0 .27.16.58.67.48A10.01 10.01 0 0 0 22 12c0-5.52-4.48-10-10-10z"/></svg>
          </a>
          <a href={`mailto:${siteConfig.Socials.Email}`} aria-label="Email">
            <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white hover:text-primary transition-colors"><rect x="2" y="4" width="20" height="16" rx="2"/><polyline points="22,6 12,13 2,6"/></svg>
          </a>
        </div>
      </div>
    </div>

    <div class="mt-8 flex flex-col md:flex-row justify-between items-center">
      <div class="text-body-dark text-sm">
        Â© {currentYear} {siteConfig.companyName}. All rights reserved.
      </div>
      
      <nav class="mt-4 md:mt-0">
        <ul class="flex flex-wrap gap-6">
          {legalMenu.map(item => (
            <li>
              <a 
                href={item.link} 
                class="text-sm text-body-dark hover:text-white transition-colors"
              >
                {item.name}
              </a>
            </li>
          ))}
        </ul>
      </nav>
    </div>
  </div>
</footer>